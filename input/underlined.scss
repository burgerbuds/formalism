// ================================
// Input Underlined
// Requires: input/base.scss
// ================================

// Imports
@import './../common/core';

// Indicator > Variables
$fu-input--optional-top: 0 !default;
$fu-input--optional-right: 0 !default;
$fu-input--required-top: 0 !default;
$fu-input--required-right: 0 !default;

// Messages > Variables
$fu-input--message-margin: 0.5em 0 0 0 !default;

// Theme
.f-input--underlined {
    $block: '.f-input';

    #{$block}__field {
        color: $f-text-color;
        background-color: $f-bg-color;
        border-bottom: $f-border-width solid $f-border-color;
        transition: transition(border-color);
        will-change: border-color;
        padding: $f-field-padding-top 0 $f-field-padding-bottom 0;

        &:hover {
            border-color: $f-border-color-hover;
        }

        &:focus {
            border-color: $f-border-color-focus;
        }

        &:disabled {
            border-color: $f-border-color-disabled;
        }

        // Webkit focus
        &:-webkit-autofill:focus,
        &:-webkit-autofill:active {
            -webkit-box-shadow: inset 0 0 0 10em $f-bg-color !important;
        }
    }

    // Error colors
    &#{$f-modifier-error} #{$block}__field,
    &#{$f-modifier-error} #{$block}__field:hover,
    &#{$f-modifier-error} #{$block}__field:focus {
        border-color: $f-border-color-error;
    }

    // Label
    #{$block}__label {
        position: absolute;
        display: flex;
        align-items: center;
        pointer-events: none;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
    }

    // Label > Focus
    #{$block}__field:focus + #{$block}__label {
        opacity: 0;
    }

    // Label > Filled
    #{$block}__field#{$f-modifier-filled} + #{$block}__label {
        opacity: 0;
    }

    // Label text
    #{$block}__label-text {
        display: block;
        background-color: $f-bg-color;
        width: 100%;

        // Interactions
        transition: transition(color);
        will-change: color;
    }

    // Selector alias > Not error nor disabled
    $fieldNormal: '&:not(#{$f-modifier-error}) #{$block}__field:not(:disabled)';

    // Label text > Hover
    #{$fieldNormal}:hover + #{$block}__label #{$block}__label-text {
        color: $f-label-color-hover;
    }

    // Label text > Error
    &#{$f-modifier-error} #{$block}__field + #{$block}__label #{$block}__label-text {
        color: $f-error-color;
    }

    // Indicator
    #{$block}__indicator {
        position: absolute;
        transition: transition(color);
        will-change: color;

        &--optional {
            top: $fu-input--optional-top;
            right: $fu-input--optional-right;
        }

        &--required {
            top: $fu-input--required-top;
            right: $fu-input--required-right;
        }
    }

    // Indicator > hover
    #{$block}__field:hover ~ #{$block}__indicator {
        color: $f-indicator-color-hover;
    }

    // Indicator > focus
    #{$block}__field:focus ~ #{$block}__indicator {
        color: $f-indicator-color-focus;
    }

    #{$block}__message {
        margin: $fu-input--message-margin;
    }
}
