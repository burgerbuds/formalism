// Variables, mixins, and functions
@import 'node_modules/formalism-framework/core/core';

// Common
$f-radio-outer-thickness: 2px !default;
$f-radio-outer-size: 1.2em !default;

$f-radio-inner-scale: .3 !default;

// Dot
// Defined in the radio/[theme].scss file

// Circle
$f-radio-circle-color: $f-core-border-color !default;
$f-radio-circle-color-checked: $f-core-highlight-color !default;
$f-radio-circle-color-hover: $f-radio-circle-color-checked !default;
$f-radio-circle-color-focus: $f-radio-circle-color-checked !default;

// Label
$f-radio-label: $f-core-text-color !default;
$f-radio-label-hover: $f-radio-label !default;
$f-radio-label-checked: $f-radio-label !default;
$f-radio-label-font-size: 1em !default;
$f-radio-label-line-height: 1 !default;

// Other
$f-radio-padding-left: 1em !default;
$f-radio-transition-duration: 0.35s !default;

// Base
.f-radio {
    $b: #{&};

    & {
        display: inline-block;
    }

    &__inner {
        display: flex;
        flex-wrap: nowrap;
        align-items: center;
    }

    &__field {
        clip: rect(1px, 1px, 1px, 1px); // Allows tabbing still
        position: absolute;
    }

    &__radio {

        & {
            display: flex;
            align-items: center;
            position: relative;
        }

        // Cursors
        #{$b}__field:not(:disabled)+& {
            cursor: pointer;
        }

        #{$b}__field:disabled+& {
            cursor: not-allowed;
        }

        // Circle and dot
        &:before,
        &:after {
            content: '';
            display: block;
            font-size: $f-radio-outer-size;
        }

        // Circle
        &:before {
            color: $f-radio-circle-color;
            border: $f-radio-outer-thickness solid currentColor;
            border-radius: 50%;
            width: 1em;
            height: 1em;
            display: block;
            transition: transition(color);
            will-change: color;
            flex-shrink: 0;
        }

        #{$b}__field:disabled+&:before {
            color: $f-core-disabled-color;
        }

        // Dot
        &:after {
            transform: scale(0);
            // visibility: hidden;
            background-color: currentColor;
            width: 1em;
            height: 1em;
            border-radius: 50%;
            transition: transition(transform);
            will-change: color;

            // Positioning
            position: absolute;
            left: 0;
            top: 0;
        }

        // Tick checked
        #{$b}__field:checked+&:after {
            transform: scale(#{$f-radio-inner-scale});
            visibility: visible;
            will-change: transform;
        }
    }

    @include f-label($b) {
        & {
            color: inherit;
            position: relative;
            display: flex;
            align-items: center;
            flex-wrap: nowrap;
            transition: transition(color);
            will-change: color;
            padding-left: $f-radio-padding-left;
        }

        // Cursors
        #{$b}__field:not(:disabled)+#{$b}__radio+& {
            cursor: pointer;
        }

        #{$b}__field:disabled+#{$b}__radio+& {
            cursor: not-allowed;
        }

        // The label text
        #{$b}__label-text {
            color: $f-radio-label;

            // Checked label colour
            #{$b}__field:hover+#{$b}__radio+& {
                color: $f-radio-label-hover;
            }

            // Checked label colour
            #{$b}__field:checked+#{$b}__radio+& {
                color: $f-radio-label-checked;
            }
        }

    }

    @include f-label-text($b) {
        font-size: $f-radio-label-font-size;
        line-height: $f-radio-label-line-height;
    }

    @include f-indicator($b);

    @include f-message {
        margin-left: 0;
    }
}