// ================================
// Fieldset Outlined
// Requires: fieldset/base.scss
// ================================

// Imports
@import './../common/core';
@import './../common/outlined';

// Variables > Padding
$fo-fieldset--padding-top: 2.25em !default;
$fo-fieldset--padding-bottom: 1.5em !default;
$fo-fieldset--padding-left: 1.75em !default;
$fo-fieldset--padding-right: $fo-fieldset--padding-left !default;
$fo-fieldset--message-margin: 1.5em 0 -0.75em $fo-fieldset--padding-left !default;
$fo-fieldset--content-spacing: 1.25em !default;

@include f-base($block: '.f-fieldset', $theme: 'outlined') {
    border: $f-border-width solid $f-border-color;
    border-radius: $fo-border-radius;
}

// Base > Error
// Custom error modifier so we can't accidentally trigger errors fields inside
@include f-base(
    $block: '.f-fieldset',
    $theme: 'outlined',
    $modifier-error: '.has-error-fieldset',
    $error: true
) {
    border-color: $f-border-color-error;
    box-shadow: inset 0 0 0 calc(#{$f-border-width-error} - #{$f-border-width})
        $f-border-color-error;
}

@include f-inner($block: '.f-fieldset', $theme: 'outlined') {
    padding-top: $fo-fieldset--padding-top;
    padding-bottom: $fo-fieldset--padding-bottom;
    padding-left: $fo-fieldset--padding-left;
    padding-right: $fo-fieldset--padding-right;

    &--stacked {
        margin-top: -$fo-fieldset--content-spacing;
        & > * {
            padding-top: $fo-fieldset--content-spacing;
        }
    }

    &--one-line {
        margin-top: -$fo-fieldset--content-spacing;
        & > * {
            padding-top: $fo-fieldset--content-spacing;
            margin-right: $fo-fieldset--content-spacing * 1.25;
        }
    }
}

@include f-legend($block: '.f-fieldset', $theme: 'outlined') {
    position: absolute;
    z-index: 1;
    display: flex;
    align-items: center;
    line-height: 1;
    top: 0;
    left: $fo-fieldset--padding-left;
    transform: translateY(-50%);
    padding: 0;
    float: left; // https://stackoverflow.com/a/30513633
}

@include f-legend-text($block: '.f-fieldset', $theme: 'outlined') {
    color: $f-text-color;
    display: block;

    &:before {
        content: '';
        position: absolute;
        top: 0;
        bottom: 0;
        left: -0.35em;
        right: -0.35em;
        z-index: -1;
        background-color: $f-bg-color;
    }
}

// Legend text > Error
// Custom error modifier so we can't accidentally trigger errors fields inside
@include f-legend-text(
    $block: '.f-fieldset',
    $theme: 'outlined',
    $modifier-error: '.has-error-fieldset',
    $error: true
) {
    color: $f-label-color-error;
}

@include f-label-indicator(
    $block: '.f-fieldset',
    $modifier-error: '.has-error-fieldset',
    $error: true
) {
    @debug (&);
    // color: green !important;
}

@include f-inner($block: '.f-fieldset', $theme: 'outlined') {
    // Display nicely again after the legend float
    float: left;
    width: 100%;
}

@include fo-message('.f-fieldset') {
    margin: $fo-fieldset--message-margin;
}
