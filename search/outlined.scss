// ================================
// Search Outlined
// Requires: search/base.scss
// ================================

// Imports
@import './imports/imports';
@import './../common/outlined/all';

// TODO: Fix these variable names

// non-configurable min width
$f-search__button-width-base: 3.5em;

// Default icon
$f-search__default-icon-size: 3em !default;
$f-search__default-icon-color: grey !default;
$f-search__default-icon-color-hover: inherit !default;
$f-search__default-icon-color-disabled: lightgrey !default;
$f-search__default-icon-max-height: 50% !default;
$f-search__default-icon-position: 0em, 0em !default; // translate(x, y) fine tuning

// General
$f-search__button-additional-width: 0em !default;

$f-search__border-color: $f-common__border-color !default;
$f-search__border-width: $f-common__border-width !default;

// Label
$f-search__label-color: $f-common__label-color !default;
$f-search__label-color-hover: $f-common__label-color-hover !default;
$f-search__label-color-focus: $f-common__label-color-focus !default;

// Cancel icon
$f-search__icon-cancel-color: grey;

.f-search {
    $b: #{&};
    $button-width: calc(
        #{$f-search__button-width-base} + #{$f-search__button-additional-width}
    );

    @include f-outlined-field($b) {
        padding-right: $button-width;
        -webkit-appearance: none;
        appearance: none;
    }

    @include f-outlined-label($b) {
        top: 0;
        bottom: 0;
        left: calc(
            #{$f-common__border-width} + #{$f-common__padding-horizontal}
        );
    }

    @include f-outlined-label-text($b);

    #{$b}__button {
        // reset
        -webkit-appearance: none;
        appearance: none;
        border: 0;
        outline: 0;
        font-size: $f-common__text-font-size;

        // alignment
        display: flex;
        align-items: center;
        justify-content: center;

        // positioning
        position: absolute;
        top: $f-common__border-width;
        bottom: $f-common__border-width;
        right: $f-common__border-width;
        padding: 0;

        // Misc
        color: $f-search__label-color;
        background-color: transparent;
        width: $button-width;
        transition: transition(background-color);

        &--default-icon svg {
            width: 1em;
            height: 1em;
            pointer-events: none;
            color: $f-search__default-icon-color;
            max-height: $f-search__default-icon-max-height;
            font-size: $f-search__default-icon-size;
            transform: translate($f-search__default-icon-position);
        }

        &:not(:disabled):hover,
        &:not(:disabled):focus {
            cursor: pointer;
        }

        &:hover {
            color: $f-search__label-color-hover;
        }

        &:focus {
            color: $f-search__label-color-focus;
        }

        &--default-icon:hover svg {
            color: $f-search__default-icon-color-hover;
        }
    }

    #{$b}__field:disabled ~ &__button--default-icon svg {
        color: $f-search__default-icon-color-disabled;
    }

    // Webkit > Customise remove text button
    ::-webkit-search-cancel-button {
        -webkit-appearance: none;
        transform: translateZ(0);
        height: 1em;
        width: 1em;
        cursor: pointer;
        margin-left: 1em;
        background: $f-common__background-color
            url("data:image/svg+xml,%3Csvg viewBox='0 0 27.707 27.707' xmlns='http://www.w3.org/2000/svg'%3E%3Cline x1='.854' x2='26.854' y1='.854' y2='26.854' stroke='#{$f-search__icon-cancel-color}' stroke-width='3' stroke-miterlimit='10'/%3E%3Cline x1='.854' x2='26.854' y1='26.854' y2='.854' stroke='#{$f-search__icon-cancel-color}' stroke-width='3' stroke-miterlimit='10'/%3E%3C/svg%3E%0A")
            no-repeat 50%;
    }

    @include f-outlined-indicator($b);
    @include f-outlined-message($b) {
        margin: $f-outlined__message-margin-inset;
    }
}
