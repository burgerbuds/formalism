@import './../core/variables';

@mixin f-core-outlined-field($b) {
    #{$b}__field {
        color: $f-core-text-color;
        background-color: $f-outlined-background-color;
        border: $f-core-border-width solid $f-core-border-color;
        border-radius: $f-outlined-border-radius;
        transition: border-color $f-core-transition-duration
            $f-core-transition-timing;
        will-change: border-color;

        &:hover {
            border-color: $f-core-border-color-hover;
        }

        &:focus {
            border-color: $f-core-border-color-focus;
            box-shadow: inset 0 0 0
                calc(#{$f-core-border-width-focus} - #{$f-core-border-width})
                $f-core-border-color-focus;
        }

        &[disabled] {
            cursor: not-allowed;
            border-color: $f-core-disabled-border-color;
        }

        // Autofill > Default / Hover
        &:-webkit-autofill,
        &:-webkit-autofill:hover {
            -webkit-box-shadow: 0 0 0 10em $f-outlined-background-color inset !important;
        }

        // Autofill > Focus / Active
        &:-webkit-autofill:focus,
        &:-webkit-autofill:active {
            -webkit-box-shadow: inset 0 0 0
                    calc(
                        #{$f-core-border-width-focus} - #{$f-core-border-width}
                    )
                    $f-core-border-color-focus,
                inset 0 0 0 10em $f-outlined-background-color !important;
        }

        @content;
    }

    // Error colours
    &#{$f-core-error-selector} #{$b}__field,
    &#{$f-core-error-selector} #{$b}__field:hover,
    &#{$f-core-error-selector} #{$b}__field:focus {
        border-color: $f-core-border-color-error;
        box-shadow: inset 0 0 0
            calc(#{$f-core-border-width-error} - #{$f-core-border-width})
            $f-core-border-color-error;
    }
}

@mixin f-core-outlined-label($b) {
    #{$b}__label {
        position: absolute;
        display: flex;
        align-items: center;
        pointer-events: none;

        // Interactions
        transition: transition(transform);
        will-change: transform;
        transform-origin: top left;

        @content;
    }

    // Label > Focus movement
    #{$b}__field:focus + #{$b}__label,
    #{$b}__field#{$f-core-filled-selector} + #{$b}__label {
        transform: translateY(-$f-core-padding-vertical);
    }
}

@mixin f-core-outlined-label-text($b) {
    #{$b}__label-text {
        display: block;

        // Interactions
        transform-origin: top left;
        transition: transition(transform), transition(color);
        will-change: transform, color;

        // Label background line mask
        &:before {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            left: -0.35em;
            right: -0.35em;
            z-index: -1;
            background-color: $f-outlined-background-color;
            will-change: transform;
        }

        @content;
    }

    // Hover > Label text
    #{$b}__field:hover + #{$b}__label #{$b}__label-text {
        color: $f-core-label-color-hover;
    }

    // Filled > Label text
    #{$b}__field#{$f-core-filled-selector} + #{$b}__label #{$b}__label-text {
        color: $f-outlined-label-color-filled;
    }

    // Focus + Filled > Label text
    #{$b}__field:focus + #{$b}__label #{$b}__label-text,
    #{$b}__field#{$f-core-filled-selector} + #{$b}__label #{$b}__label-text {
        transform: scale($f-outlined-label-scale) translateY(-50%)
            translateY(floor(-$f-core-border-width/2));
        color: $f-core-label-color-focus;
    }

    // Error > Label text colours
    &#{$f-core-error-selector} #{$b}__field + #{$b}__label #{$b}__label-text {
        color: $f-core-error-color;
    }
}

@mixin f-core-outlined-indicator($b) {
    // Indicator
    #{$b}__indicator {
        position: absolute;
        transition: transition(color);
        will-change: color;

        &--optional {
            top: $f-outlined-indicator-optional-top;
            right: $f-outlined-indicator-optional-right;
        }

        &--required {
            top: $f-outlined-indicator-required-top;
            right: $f-outlined-indicator-required-right;
        }

        @content;
    }

    // Indicator > hover
    #{$b}__field:hover ~ #{$b}__indicator {
        color: $f-core-indicator-color-hover;
    }

    // Indicator > focus
    #{$b}__field:focus ~ #{$b}__indicator {
        color: $f-core-indicator-color-focus;
    }
}

@mixin f-core-outlined-message($b) {
    #{$b}__message {
        margin: $f-outlined-message-margin;
        @content;
    }
}
