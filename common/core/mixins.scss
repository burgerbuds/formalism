// Mixins

// The element root
@mixin f-core-base {
    position: relative;
    font-size: $f-core-base-size;
    text-align: left;

    *,
    *:before,
    *:after {
        box-sizing: border-box;
    }

    @content;
}

// The inner wrapping element
@mixin f-core-inner {
    &__inner {
        display: block;
        position: relative;
        @content;
    }
}

// The form field
@mixin f-core-field {
    &__field {
        color: $f-core-text-color;
        padding: $f-core-padding-vertical $f-core-padding-horizontal;
        width: 100%;
        border: 0;
        caret-color: $f-core-text-caret-color;
        font-size: $f-core-text-font-size;
        font-family: inherit;

        &:focus {
            outline: 0; // Focus indicator is handled $f-core-border-color-focus instead
        }

        // Disabled  > Field color (extra specificity)
        &#{&}[disabled] {
            color: $f-core-disabled-color;
        }

        // Error state > Custom error caret
        #{$f-core-error-selector} & {
            caret-color: $f-core-error-color;
        }

        // Custom selection colours (important required)
        &::-moz-selection {
            color: $f-core-selection-color;
            background: $f-core-selection-bg !important;
            text-shadow: none;
        }

        &::selection {
            color: $f-core-selection-color !important;
            background: $f-core-selection-bg !important;
            text-shadow: none;
        }

        // Error > Custom selection colours (important required)
        #{$f-core-error-selector} &::-moz-selection {
            color: $f-core-selection-color;
            background: $f-core-error-color !important;
            text-shadow: none;
        }

        #{$f-core-error-selector} &::selection {
            color: $f-core-selection-color !important;
            background: $f-core-error-color !important;
            text-shadow: none;
        }

        &:-webkit-autofill {
            -webkit-text-fill-color: $f-core-text-color !important;
        }

        @content;
    }
}

// The field label (not the label element)
@mixin f-core-label($b) {
    &__label {
        user-select: none;
        font-size: $f-core-text-font-size;
        @content;
    }
}

// The field label text
@mixin f-core-label-text($b) {
    &__label-text {
        color: $f-core-label-color;

        // Disabled > Label text color (extra specificity)
        #{$b}__field[disabled]#{$b}__field[disabled] + #{$b}__label & {
            color: $f-core-disabled-color;
        }

        @content;
    }
}

// The indicator
// Either required or optional indicator
@mixin f-core-indicator($b) {
    &__indicator {
        pointer-events: none;
        user-select: none;
        color: $f-core-indicator-color;

        &--optional {
            font-size: $f-core-indicator-optional-size;
        }

        &--required {
            font-size: $f-core-indicator-required-size;
        }

        // Error state > Indicator hover/focus
        #{$f-core-error-selector} #{$b}__field:hover ~ &,
        #{$f-core-error-selector} #{$b}__field:focus ~ & {
            color: $f-core-error-color !important;
        }

        // Disabled > Indicator color (extra specificity)
        #{$b}__field[disabled]#{$b}__field[disabled] ~ & {
            color: $f-core-disabled-color;
        }

        @content;
    }
}

// The message (error, instructions etc)
@mixin f-core-message {
    &__message {
        font-size: $f-core-message-font-size;

        &--instruction {
            color: $f-core-message-color;
        }

        &--error {
            color: $f-core-error-color;

            // Error > Custom selection colours (important required)
            #{$f-core-error-selector} &::-moz-selection {
                color: $f-core-selection-color;
                background: $f-core-error-color !important;
                text-shadow: none;
            }

            #{$f-core-error-selector} &::selection {
                color: $f-core-selection-color !important;
                background: $f-core-error-color !important;
                text-shadow: none;
            }
        }

        // Hide the instructions if there's an error
        @if ($hide-instructions-when-error) {
            &--error + &--instruction {
                display: none;
            }
        }

        @content;
    }
}

// Functions

// Usage: transition: transition(transform);
@function transition($property) {
    @return $property $f-core-transition-duration $f-core-transition-timing;
}
