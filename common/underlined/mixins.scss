@import './../core/variables';

@mixin f-core-underlined-field($b) {
    #{$b}__field {
        color: $f-core-text-color;
        background-color: $f-underlined-background-color;
        border-bottom: $f-core-border-width solid $f-core-border-color;
        transition: border-color $f-core-transition-duration
            $f-core-transition-timing;
        will-change: border-color;
        padding: $f-core-padding-vertical 0;

        &:hover {
            border-color: $f-core-border-color-hover;
        }

        &:focus {
            border-color: $f-core-border-color-focus;
        }

        &[disabled] {
            cursor: not-allowed;
            border-color: $f-core-disabled-border-color;
        }

        // Webkit focus
        &:-webkit-autofill:focus,
        &:-webkit-autofill:active {
            -webkit-box-shadow: inset 0 0 0 10em $f-underlined-background-color !important;
        }

        @content;
    }

    // Error colours
    &#{$f-core-error-selector} #{$b}__field,
    &#{$f-core-error-selector} #{$b}__field:hover,
    &#{$f-core-error-selector} #{$b}__field:focus {
        border-color: $f-core-border-color-error;
    }
}

@mixin f-core-underlined-label($b) {
    #{$b}__label {
        position: absolute;
        display: flex;
        align-items: center;
        pointer-events: none;
        left: 0;
        right: 0;

        @content;
    }

    // Label > Focus movement
    #{$b}__field#{$f-core-filled-selector} + #{$b}__label {
        opacity: 0;
    }
}

@mixin f-core-underlined-label-text($b) {
    #{$b}__label-text {
        display: block;
        background-color: $f-underlined-background-color;
        width: 100%;

        // Interactions
        transition: transition(color);
        will-change: color;

        @content;
    }

    // Hover > Label text
    #{$b}__field:hover + #{$b}__label #{$b}__label-text {
        color: $f-core-label-color-hover;
    }

    // Error > Label text colours
    &#{$f-core-error-selector} #{$b}__field + #{$b}__label #{$b}__label-text {
        color: $f-core-error-color;
    }
}

@mixin f-core-underlined-indicator($b) {
    // Indicator
    #{$b}__indicator {
        position: absolute;
        transition: transition(color);
        will-change: color;

        &--optional {
            top: $f-underlined-indicator-optional-top;
            right: $f-underlined-indicator-optional-right;
        }

        &--required {
            top: $f-underlined-indicator-required-top;
            right: $f-underlined-indicator-required-right;
        }

        @content;
    }

    // Indicator > hover
    #{$b}__field:hover ~ #{$b}__indicator {
        color: $f-core-indicator-color-hover;
    }

    // Indicator > focus
    #{$b}__field:focus ~ #{$b}__indicator {
        color: $f-core-indicator-color-focus;
    }
}

@mixin f-core-underlined-message($b) {
    #{$b}__message {
        margin: $f-underlined-message-margin;
        @content;
    }
}
