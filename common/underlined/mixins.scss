@import './../core/variables';

@mixin f-underlined-field($b) {
    #{$b}__field {
        color: $f-common__text-color;
        background-color: $f-underlined-background-color;
        border-bottom: $f-common__border-width solid $f-common__border-color;
        transition: border-color $f-common__transition-duration
            $f-common__transition-timing;
        will-change: border-color;
        padding: $f-common__padding-vertical 0;

        &:hover {
            border-color: $f-common__border-color-hover;
        }

        &:focus {
            border-color: $f-common__border-color-focus;
        }

        &[disabled] {
            // cursor: not-allowed;
            border-color: $f-common__disabled-border-color;
        }

        // Webkit focus
        &:-webkit-autofill:focus,
        &:-webkit-autofill:active {
            -webkit-box-shadow: inset 0 0 0 10em $f-underlined-background-color !important;
        }

        @content;
    }

    // Error colours
    &#{$f-modifier__error} #{$b}__field,
    &#{$f-modifier__error} #{$b}__field:hover,
    &#{$f-modifier__error} #{$b}__field:focus {
        border-color: $f-common__border-color-error;
    }
}

@mixin f-underlined-label($b) {
    #{$b}__label {
        position: absolute;
        display: flex;
        align-items: center;
        pointer-events: none;
        left: 0;
        right: 0;

        @content;
    }

    // Label > Focus movement
    #{$b}__field#{$f-modifier__filled} + #{$b}__label {
        opacity: 0;
    }
}

@mixin f-underlined-label-text($b) {
    #{$b}__label-text {
        display: block;
        background-color: $f-underlined-background-color;
        width: 100%;

        // Interactions
        transition: transition(color);
        will-change: color;

        @content;
    }

    // Hover > Label text
    #{$b}__field:hover + #{$b}__label #{$b}__label-text {
        color: $f-common__label-color-hover;
    }

    // Error > Label text colours
    &#{$f-modifier__error} #{$b}__field + #{$b}__label #{$b}__label-text {
        color: $f-common__error-color;
    }
}

@mixin f-underlined-indicator($b) {
    // Indicator
    #{$b}__indicator {
        position: absolute;
        transition: transition(color);
        will-change: color;

        &--optional {
            top: $f-underlined-indicator-optional-top;
            right: $f-underlined-indicator-optional-right;
        }

        &--required {
            top: $f-underlined-indicator-required-top;
            right: $f-underlined-indicator-required-right;
        }

        @content;
    }

    // Indicator > hover
    #{$b}__field:hover ~ #{$b}__indicator {
        color: $f-common__indicator-color-hover;
    }

    // Indicator > focus
    #{$b}__field:focus ~ #{$b}__indicator {
        color: $f-common__indicator-color-focus;
    }
}

@mixin f-underlined-message($b) {
    #{$b}__message {
        margin: $f-underlined-message-margin;
        @content;
    }
}
